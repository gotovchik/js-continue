<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OOP JS Seminar</title>
  </head>
  <body>
    <script>
      "use strict";

      //       Задание 1 (тайминг 20 минут)
      // 1. Создайте объект Person, представляющий человека, с
      // следующими свойствами: name, age и gender. Добавьте
      // также методы introduce и changeName. Метод introduce
      // должен выводить информацию о человеке, включая его
      // имя, возраст и пол. Метод changeName должен изменять
      // имя человека на новое заданное значение.
      // Person.name = "John";
      // Person.age = 25;
      // Person.gender = "male";
      // Person.introduce(); // Ожидаемый результат: My name is
      // John. I'm 25 years old and I identify as male.
      // Person.changeName("Mike");

      const person = {
        name: "John",
        age: "25",
        gender: "male",

        introduce() {
          console.log(
            `My name is ${this.name}. I'm ${this.age} years old and I identify as ${this.gender}.`
          );
        },
        changeName(name) {
          this.name = name;
        },
      };

      person.introduce();
      person.changeName("Mike");
      person.introduce();

      //       Задание 2 (20минут)
      // 1. Создайте объект Animal со свойством name и методом eat(), который
      // выводит сообщение о том, что животное ест. Создайте объект Dog со
      // свойством name и методом bark(), который выводит сообщение о
      // том, что собака лает. Используйте одалживание метода eat() из
      // объекта Animal для объекта Dog, чтобы вывести сообщение о том,
      // что собака ест.

      const animal = {
        name,

        eat() {
          console.log(`${this.name} is eating`);
        },
      };

      const dog = {
        name: "Rex",
        bark() {
          console.log(`${this.name} is barking`);
        },
      };

      dog.eat = animal.eat;

      dog.eat();

      //       Задание 4 (Объекты через class 25 минут)
      // 1. Создайте класс Person, который имеет свойства name и age, а также
      // метод introduce(), который выводит сообщение с представлением
      // имени и возраста персоны.
      // const person = new Person("John", 25);
      // person.introduce(); // Вывод: My name is John and I'm 25 years old

      class Person {
        name;
        age;

        constructor(name, age) {
          this.name = name;
          this.age = age;
        }

        introduce = () => {
          console.log(`My name is ${this.name}. I'm ${this.age} years old.`);
        };
      }

      const person1 = new Person("John", 25);

      //       Задание 5 (Class 30 минут)
      // Создайте класс BankAccount, который представляет банковский счет.
      // У него должны быть свойства accountNumber (номер счета) и balance
      // (баланс), а также методы deposit(amount) для пополнения счета и
      // withdraw(amount) для снятия денег со счета. Класс должен иметь
      // также статическое свойство bankName, которое содержит название
      // банка.
      // const account1 = new BankAccount("1234567890", 1000);
      // account1.deposit(500); // Вывод: Deposited 500 into account
      // 1234567890. New balance: 1500
      // account1.withdraw(200); // Вывод: Withdrawn 200 from account
      // 1234567890. New balance: 1300
      // account1.withdraw(1500); // Вывод: Insufficient funds in account
      // 1234567890

      person1.introduce();
      function checkBalance(balance) {
        if (!Number.isFinite(balance)) {
          throw new Error("Must be a number");
        }
        if (balance < 0) {
          throw new Error("Must be a positive number");
        }
        if ((balance * 100) % 1 !== 0) {
          throw new Error("Must be 2 digits after dot");
        }
      }

      class BankAccount {
        static bankName = "GBank";
        constructor(accountNumber, balance) {
          if (accountNumber.length != 10) {
            throw new Error("Wrong account number length");
          }
          checkBalance(balance);
          this.accountNumber = accountNumber;
          this.balance = balance;
        }

        deposit(amount) {
          checkBalance(amount);
          this.balance += amount;
        }

        withdraw(amount) {
          checkBalance(amount);
          if (this.balance < amount) {
            throw new Error(
              `Insufficient funds in account ${this.accountNumber}`
            );
          }
          this.balance -= amount;
        }

        printBalance() {
          console.log(
            `${BankAccount.bankName} account "${this.accountNumber}" balance: ${this.balance}`
          );
        }
      }

      const account1 = new BankAccount("1234567890", 1000.11);

      //       Задание 6 (Рекурсия 25 минут)
      // 1. Напишите рекурсивную функцию sumDigits, которая принимает
      // положительное целое число в качестве аргумента и возвращает
      // сумму его цифр.
      // // Пример использования:
      // console.log(sumDigits(123)); // Ожидаемый результат: 6 (1 + 2 + 3)
      // console.log(sumDigits(456789)); // Ожидаемый результат: 39 (4 + 5 + 6
      // + 7 + 8 + 9)

      function sumDigit(number) {
        if (number < 10) return number;
        return (number % 10) + sumDigit(parseInt(number / 10));
      }

      console.log(sumDigit(123));
      console.log(sumDigit(456789));
    </script>
  </body>
</html>
